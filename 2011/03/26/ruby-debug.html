<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>How to debug a ruby script</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="/stylesheets/styles.css">
    <link rel="alternate" type="application/atom+xml"
          href="http://dev.otrobloggeek.com/atom.xml" title="Atom feed">
</head>


  <body>
    <div id="header">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <h1>I write code</h1>
          </div>
        </div>
      </div>
    </div>

    <div id="content" class="container">
      <div class="row">
        <div class="col-md-7 col-md-offset-2">
          
<div class="post panel panel-default">
    <div class="post-title panel-heading">
        
        <h2><a href="/2011/03/26/ruby-debug.html">How to debug a ruby script</a></h2>
        
    </div>
    <div class="post-metas panel-body">
        <span class="glyphicon glyphicon-calendar"></span>
26 Mar 2011

<span class="glyphicon glyphicon-tags"></span>
&nbsp;

<span class="label label-info">
    ruby
</span>
&nbsp;


<span class="glyphicon glyphicon-comment"></span>
<a href="http://dev.otrobloggeek.com/2011/03/26/ruby-debug.html#disqus_thread">Comments</a>

    </div>
</div>


<div class="post">
    <p>Debugging r00lz. Maybe you&#39;re trying to find an elusive bug or how that
spaghetti piece of code works, in any case is a quite powerful tool and you
should add it to your day to day job.</p>

<p>Debugging in ruby is easy... and you don&#39;t even need a GUI for it! Ruby has the
amazing <code>ruby-debug</code> gem. That gem provides an executable to debug your ruby
software. There&#39;re versions for ruby 1.8.x and ruby 1.9.x. I will explain here
how to install and use the version for ruby 1.8, but ruby 1.9 version is quite
similar.</p>

<p>First install the gem with <code>gem install ruby-debug</code>. This will give you an
executable called <code>rdebug</code> which executes the ruby interpreter in debug mode
allowing you to debug your script.</p>

<p>I will use this small script to debug.</p>

<div><script src='https://gist.github.com/889122.js?file=small_script.rb'></script>
<noscript><pre><code>dude = true

if dude
  puts &quot;Hey dude&quot;
else
  puts &quot;Hello world&quot;
end</code></pre></noscript></div>

<p>Now we can just run the debugger with <code>rdebug small_script.rb</code>. And... voila!</p>

<div><script src='https://gist.github.com/889122.js?file=debug_1.rb'></script>
<noscript><pre><code>[-4, 5] in /projects/889122/small_script.rb
=&gt; 1  dude = true
   2  
   3  if dude
   4    puts &quot;Hey dude&quot;
   5  else
/projects/889122/small_script.rb:1
dude = true
(rdb:1) 
</code></pre></noscript></div>

<p>Here you can see the debugger.</p>

<p>Here&#39;s the file in which you&#39;ve stopped:
<code>[-4, 5] in /projects/889122/small_script.rb</code></p>

<p>This arrow indicates that you&#39;re stopped there:
<code>=&gt; 1 dude = true</code></p>

<p>And this is the rdebug console where you can give commands to the debugger.:
<code>(rdb:1) _</code></p>

<p>Let&#39;s give it a quick try to see how the commands work. Type <code>help</code> and press
enter.</p>

<div><script src='https://gist.github.com/889122.js?file=rdebug_help'></script>
<noscript><pre><code>ruby-debug help v0.10.4
Type &#39;help &lt;command-name&gt;&#39; for help on a specific command

Available commands:
backtrace  delete   enable  help  method  putl     set     trace    
break      disable  eval    info  next    quit     show    undisplay
catch      display  exit    irb   p       reload   step    up       
condition  down     finish  kill  pp      restart  thread  var      
continue   edit     frame   list  ps      save     tmate   where</code></pre></noscript></div>

<p>As you can see there&#39;re plenty of commands in the debugger, those ones you will
use them a lot.</p>

<ul>
<li><strong>next</strong> (you can use it shortened as <code>n</code> as well) will make the
script go one step forward.</li>
<li><strong>continue</strong> (shortened as <code>c</code>) will make the script continue until it
finds a breakpoint.</li>
<li><strong>step</strong> (shortened as <code>s</code>) will step into a method.</li>
<li><strong>break</strong> (shortened as <code>b</code>) sets a breakpoint with the format <code>b
file_name.rb:XX</code> where XX is the line number.</li>
</ul>

<p>For everything else... I encourage you to spend 15 minutes reading each command
help 1 by 1. Special mention to <code>irb</code>, <code>where</code>, <code>up</code> and <code>down</code> commands.</p>

<p>Enjoy your debugging!!</p>

</div>

<div class="comments">
    <div id="disqus_thread"></div>
<script type="text/javascript">
 /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
 var disqus_shortname = 'franciscoj';
 var disqus_url = 'http://dev.otrobloggeek.com/2011/03/26/ruby-debug.html';
 var disqus_identifier = 'http://dev.otrobloggeek.com/2011/03/26/ruby-debug.html';

 /* * * DON'T EDIT BELOW THIS LINE * * */
 (function() {
     var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
     dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
     (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
 })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

</div>

        </div>
      </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<!-- Latest compiled and minified JavaScript -->
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>

<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'franciscoj'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function () {
var s = document.createElement('script'); s.async = true;
s.type = 'text/javascript';
s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>

  </body>
</html>
